let isErasing = false;

// Switch to eraser mode
document.getElementById('eraserButton').addEventListener('click', () => {
  isErasing = true;
  ctx.strokeStyle = 'white'; // Set eraser color
  ctx.lineWidth = 20; // Set eraser size (thicker stroke)
});

// Switch to drawing mode
document.getElementById('drawButton').addEventListener('click', () => {
  isErasing = false;
  ctx.strokeStyle = 'black'; // Set drawing color
  ctx.lineWidth = 2; // Reset stroke size
});

// Update draw function to support erasing
function draw(event) {
  if (!isDrawing) return;

  const position = getPosition(event);
  if (!isErasing) {
    // Normal drawing
    const dx = position.x - lastPoint.x;
    const dy = position.y - lastPoint.y;
    const dt = position.time - lastTime;
    const distance = Math.sqrt(dx ** 2 + dy ** 2);
    const speed = dt > 0 ? (distance / dt) * 1000 : 0;

    currentPath.push({ x: position.x, y: position.y, speed });
  }

  ctx.lineTo(position.x, position.y);
  ctx.stroke();

  lastPoint = position;
  lastTime = position.time;
}
